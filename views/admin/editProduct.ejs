<%-include('header')-%>

<div class="container-fluid pt-4 px-4">
    <div class="row g-4">
        <div style="width: 100%;" class="col-sm-12 col-xl-6">
            <div class="bg-light rounded h-100 p-4">
                <h6 class="mb-4">EDIT PRODUCT</h6>
                <form class="mt-5" method="post" action="/admin/editproduct" enctype="multipart/form-data">
                    <input type="text" hidden name="id" value="<%= product._id %>">
                    <div class="mb-3">
                      <label for="UrunAdi" class="form-label">Product Name</label>
                      <input value="<%= product.name %>"  name="productname" type="text" class="form-control" id="UrunAdi" required>
                    </div>
                    <div class="mb-3">
                      <label class="form-label" for="UrunMiktar">Stock Quantity</label>
                      <input min="1" value="<%= product.stock %>"  name="stockquantity" type="number" class="form-control" id="UrunMiktar" required>
                    </div>
                    <div class="mb-3">
                        <label for="UrunAdi" class="form-label">Price</label>
                        <input min="1" value="<%= product.price %>"  name="price" type="number" class="form-control" id="UrunAdi" required>
                    </div>
                    <div class="mb-3">
                        <label for="UrunAdi" class="form-label">Description</label>
                        <input value="<%= product.description %>"  name="description" type="text" class="form-control" id="UrunAdi" required>
                    </div>
                    
                    <div class="mb-3">
                        <label for="Kategori" class="form-label">Product Category</label>
                        <select name="productcategory" id="Kategori" class="ms-1 d-block w-100" required>
                            <option value="<%= product.category %>"><%= product.category %></option>
                            <% category.forEach((row) => { %>
                                <% if(row.isAvailable == true){ %>
                                    <option value="<%= row.category %>"><%= row.category %></option>
                                <% } %>
                            <% }); %>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label for="UrunImage" class="form-label">Product Image</label>
                        <input name="productimage" accept="image/*" type="file" multiple class="form-control" name="UrunImage" id="UrunImage">
                        <div style="display: flex; margin-top: 20px;">
                            <% product.images.forEach(element => { %>                        
                                <div style="position: relative;">
                                    <img class="img-fluid" style="width: 90px; margin: 10px;" src="/img/<%= element %>" alt="">
                                    <a style="position: absolute; top: 0; right: 0; color: red;" class="fas fa-times" href="/admin/deleteproductimg/<%= element %>/<%= product._id %>"></a>
                                </div>
                            <% }) %>
                        </div>
                        
                    </div>
                    <div class="d-flex justify-content-center">
                        <button class="btn btn-primary" type="submit">Update</button>
                    </div>
                  </form>
            </div>
        </div>
        
    </div>
</div>


<%-include('footer')-%>